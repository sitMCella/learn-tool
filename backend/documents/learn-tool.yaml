openapi: "3.0.0"
info:
  title: Learn Tool REST APIs
  description: Documentation for the Learn Tool REST APIs.
  version: 1.0.0
paths:
  /api/workspaces:
    post:
      summary: Create a new Workspace
      operationId: create-workspace
      tags:
        - workspace
      requestBody:
        description: Workspace payload.
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
            example:
              name: "workspaceTest"
      responses:
        '201':
          description: Workspace successfully created.
          headers:
            location:
              description: The location of the created Workspace.
              schema:
                type: string
              example:
                location: /workspaces/workspaceTest
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
              example:
                name: "workspaceTest"
        '409':
          description: A Workspace already exists with this name.
        '422':
          description: >-
            The Workspace name is empty or incorrect. Allowed characters: [a-zA-Z0-9-_].
        '500':
          description: An error occured while creating the Workspace.
    get:
      summary: Get all the Workspaces
      operationId: get-workspaces
      tags:
        - workspace
      responses:
        '200':
          description: The list of Workspaces.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                example:
                  - name: "workspaceTest"
  /api/workspaces/{workspaceName}/cards:
    post:
      summary: Create a new Card
      operationId: create-card
      tags:
        - card
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
      requestBody:
        description: Card content payload.
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - question
                - response
              properties:
                question:
                  type: string
                response:
                  type: string
            example:
              question: "This is a question"
              response: "This is a response"
      responses:
        '201':
          description: Card successfully created.
          headers:
            location:
              description: The location of the created Card.
              schema:
                type: string
              example:
                location: "/workspaces/workspaceTest/cards/3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  workspaceName:
                    type: string
                  question:
                    type: string
                  response:
                    type: string
              example:
                id: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
                workspaceName: "workspaceTest"
                question: "This is a question"
                response: "This is a response"
        '404':
          description: The Workspace does not exist.
        '409':
          description: A Card already exists with this id.
        '422':
          description: The Card content fields are null or empty.
        '500':
          description: An error occured while creating the Card.
    get:
      summary: Get all the Cards of a Workspace
      operationId: get-cards
      tags:
        - card
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
      responses:
        '200':
          description: The list of Cards.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    workspaceName:
                      type: string
                    question:
                      type: string
                    response:
                      type: string
                example:
                  - id: "123"
                    workspaceName: "workspaceTest"
                    question: "Question"
                    response: "Response"
  /api/workspaces/{workspaceName}/cards/{cardId}:
    put:
      summary: Update a Card
      operationId: update-card
      tags:
        - card
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
        - name: cardId
          in: path
          description: The Id of the Card.
          required: true
          schema:
            type: string
          example: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
      requestBody:
        description: Card content payload.
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - question
                - response
              properties:
                question:
                  type: string
                response:
                  type: string
            example:
              question: "This is a question"
              response: "This is a response"
      responses:
        '200':
          description: Card successfully updated.
          headers:
            location:
              description: The location of the created Card.
              schema:
                type: string
              example:
                location: "/workspaces/workspaceTest/cards/3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  workspaceName:
                    type: string
                  question:
                    type: string
                  response:
                    type: string
              example:
                id: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
                workspaceName: "workspaceTest"
                question: "This is a question"
                response: "This is a response"
        '404':
          description: The Workspace does not exist.
        '422':
          description: Either the Card content fields are null or empty, or the Card does not belong to the provided Workspace name.
        '500':
          description: An error occured while updating the Card.
    delete:
      summary: Delete a Card
      operationId: delete-card
      tags:
        - card
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
        - name: cardId
          in: path
          description: The Id of the Card.
          required: true
          schema:
            type: string
          example: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
      responses:
        '200':
          description: Card successfully deleted.
        '404':
          description: The Workspace does not exist.
        '422':
          description: The Card does not belong to the provided Workspace name.
        '500':
          description: An error occured while deleting the Card.
  /api/workspaces/{workspaceName}/cards/many.csv:
    post:
      summary: Create new Cards
      operationId: create-cards
      tags:
        - card
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
      requestBody:
        description: Cards content payload.
        required: true
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
            example: >-
              question,response
              questionTest,responseTest
      responses:
        '201':
          description: Cards successfully created.
        '404':
          description: The Workspace does not exist.
        '409':
          description: One of the Cards already exists with the same id.
        '422':
          description: >-
            CSV fields null or empty, or missing headers.
        '500':
          description: An error occured while creating the Cards.
  /api/workspaces/{workspaceName}/learn:
    get:
      summary: Retrieve a Card from the Workspace
      operationId: retrieve-card
      tags:
        - card
        - learn
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
      responses:
        '200':
          description: Card content.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  workspaceName:
                    type: string
                  question:
                    type: string
                  response:
                    type: string
              example:
                id: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
                workspaceName: "workspaceTest"
                question: "This is a question"
                response: "This is a response"
        '404':
          description: The Workspace or the Card do not exist.
  /api/workspaces/{workspaceName}/learn/{cardId}:
    post:
      summary: Create a new LearnCard
      operationId: create-learn-card
      tags:
        - card
        - learn
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
        - name: cardId
          in: path
          description: The Card ID.
          required: true
          schema:
            type: string
          example: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
      responses:
        '201':
          description: LearnCard successfully created.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  workspaceName:
                    type: string
                  lastReview:
                    type: string
                    format: date-time
                  nextReview:
                    type: string
                    format: date-time
                  repetitions:
                    type: integer
                  easeFactor:
                    type: number
                    format: float
                  intervalDays:
                    type: integer
              example:
                id: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
                workspaceName: "workspaceTest"
                lastReview: "2020-04-10T19:46:06.167117Z"
                nextReview: "2020-04-10T19:46:06.167117Z"
                repetitions: 0
                easeFactor: 1.3
                intervalDays: 0
        '404':
          description: The Card does not exist.
        '406':
          description: The Card does not belong to the Workspace.
        '409':
          description: The LearnCard already exists.
        '500':
          description: An error occured while creating the LearnCard.
    put:
      summary: Evaluate a Card from the Workspace
      operationId: evaluate-card
      tags:
        - card
        - learn
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
        - name: cardId
          in: path
          description: The Card ID.
          required: true
          schema:
            type: string
          example: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
      requestBody:
        description: Evaluation parameters content payload.
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - quality
              properties:
                quality:
                  type: integer
            example:
              cardId: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
              quality: 5
      responses:
        '200':
          description: LearnCard content.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  workspaceName:
                    type: string
                  lastReview:
                    type: string
                    format: date-time
                  nextReview:
                    type: string
                    format: date-time
                  repetitions:
                    type: integer
                  easeFactor:
                    type: number
                    format: float
                  intervalDays:
                    type: integer
              example:
                id: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
                workspaceName: "workspaceTest"
                lastReview: "2020-04-10T19:46:06.167117Z"
                nextReview: "2020-04-10T19:47:06.167117Z"
                repetitions: 1
                easeFactor: 1.4
                intervalDays: 1
        '404':
          description: The Workspace or the Card do not exist.
        '406':
          description: The Card does not belong to the Workspace or not acceptable evaluation parameters.
        '500':
          description: An error occured while evaluating the Card.
    delete:
      summary: Delete a new LearnCard
      operationId: delete-learn-card
      tags:
        - card
        - learn
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
        - name: cardId
          in: path
          description: The Card ID.
          required: true
          schema:
            type: string
          example: "3cf14a93-f8c7-4b6b-ac24-a662ca500c21"
      responses:
        '200':
          description: LearnCard successfully deleted.
        '404':
          description: The Card or the LearnCard do not exist.
        '406':
          description: The Card does not belong to the Workspace.
        '500':
          description: An error occured while deleting the LearnCard.
  /api/workspaces/{workspaceName}/expoprt:
    get:
      summary: Export the Workspace backup
      operationId: export-workspace
      tags:
        - workspace
        - export
      parameters:
        - name: workspaceName
          in: path
          description: The name of the Workspace.
          required: true
          schema:
            type: string
          example: "workspaceTest"
      responses:
        '200':
          description: Workspace backup file.
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        '404':
          description: The Workspace does not exist.
        '500':
          description: An error occured while exporting the Workspace backup file.
  /api/workspaces/impprt:
    post:
      summary: Import the Workspace backup
      operationId: import-workspace
      tags:
        - workspace
        - import
      requestBody:
        description: Workspace backup file payload.
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
      responses:
        '200':
          description: The Workspace backup file has been correctly imported.
        '409':
          description: A Workspace already exists with this name.
        '500':
          description: An error occured while importing the Workspace backup file.
